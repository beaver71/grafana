<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      // https://github.com/GoogleChromeLabs/tti-polyfill
      !(function() {
        if ('PerformanceLongTaskTiming' in window) {
          var g = (window.__tti = { e: [] });
          g.o = new PerformanceObserver(function(l) {
            g.e = g.e.concat(l.getEntries());
          });
          g.o.observe({ entryTypes: ['longtask'] });
        }
      })();

    </script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000" />

    <title>[[.AppTitle]]</title>

    <base href="[[.AppSubUrl]]/" />

    <link
      rel="preload"
      href="public/fonts/roboto/RxZJdnzeo3R5zSexge8UUVtXRa8TVwTICgirnJhmVJw.woff2"
      as="font"
      crossorigin
    />

    <link rel="icon" type="image/png" href="[[.FavIcon]]" />
    <link rel="apple-touch-icon" sizes="180x180" href="[[.AppleTouchIcon]]" />
    <link rel="mask-icon" href="public/img/grafana_mask_icon.svg" color="#F05A28" />

    <link rel="stylesheet" href="public/build/grafana.[[ .Theme ]].<%= webpack.hash %>.css" />

    <script>
      performance.mark('css done blocking');
    </script>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="public/img/browserconfig.xml" />
  </head>

  <body class="theme-[[ .Theme ]] [[.AppNameBodyClass]]">
    <style>
      .preloader {
        height: 100%;
        flex-direction: column;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .preloader__enter {
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-iteration-count: 1;
        animation-duration: 0.9s;
        animation-delay: 1.35s;
        animation-fill-mode: forwards;
      }

      .preloader__bounce {
        text-align: center;
        animation-name: preloader-bounce;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
      }

      .preloader__logo {
        display: inline-block;
        animation-name: preloader-squash;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
        width: 60px;
        height: 60px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url("data:image/svg+xml,%3Csvg%20width%3D%27162%27%20height%3D%27135%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%20%3Cmetadata%20id%3D%27metadata8%27%3Eimage%2Fsvg%2Bxml%3C%2Fmetadata%3E%20%3Cg%3E%20%3Ctitle%3Ebackground%3C%2Ftitle%3E%20%3Crect%20x%3D%27-1%27%20y%3D%27-1%27%20width%3D%27164%27%20height%3D%27137%27%20id%3D%27canvas_background%27%20fill%3D%27none%27%2F%3E%20%3C%2Fg%3E%20%3Cg%3E%20%3Ctitle%3ELayer%201%3C%2Ftitle%3E%20%3Cpath%20d%3D%27m64.87707%2C105.88373l-56.20363%2C0.00053c-2.1224%2C0%20-4.04427%2C0.862%20-5.43333%2C2.2552c-1.38438%2C1.388%20-2.24011%2C3.3032%20-2.24011%2C5.41827l0%2C13.18852c0%2C2.10885%200.85104%2C4.01875%202.2276%2C5.40572c1.39011%2C1.40053%203.31667%2C2.26823%205.44636%2C2.26823l56.20311%2C0l0%2C-28.53647zm93.59627%2C2.276c-1.39067%2C-1.40573%20-3.32133%2C-2.276%20-5.45467%2C-2.276l-56.20307%2C0l0%2C28.53647l56.20307%2C-0.00156c2.132%2C0%204.06133%2C-0.86927%205.452%2C-2.27291c1.37333%2C-1.38647%202.22133%2C-3.29428%202.22133%2C-5.4l0%2C-13.18853c0%2C-2.10467%20-0.84667%2C-4.01093%20-2.21867%2C-5.39747l0.00001%2C0zm0%2C-52.43333c-1.39067%2C-1.40573%20-3.32133%2C-2.276%20-5.45467%2C-2.276l-56.2036%2C0l0%2C28.53547l56.2036%2C0c2.132%2C0%204.06133%2C-0.86987%205.452%2C-2.27347c1.37333%2C-1.3864%202.22133%2C-3.29427%202.22133%2C-5.4l0%2C-13.18907c0%2C-2.10413%20-0.84667%2C-4.01093%20-2.21867%2C-5.39693l0.00001%2C0zm-93.59627%2C-2.276l-56.20363%2C0.00053c-2.12292%2C0%20-4.04427%2C0.862%20-5.43333%2C2.2552c-1.38438%2C1.388%20-2.24011%2C3.3032%20-2.24011%2C5.41827l0%2C13.18853c0%2C2.1088%200.85052%2C4.01867%202.2276%2C5.40573c1.39011%2C1.40053%203.31667%2C2.26773%205.44584%2C2.26773l56.20363%2C0l0%2C-28.536l0%2C0.00001zm88.1416%2C-23.89787l-144.34523%2C0.00053c-2.12917%2C0%20-4.05625%2C-0.8672%20-5.44636%2C-2.26773c-1.37656%2C-1.38707%20-2.22708%2C-3.29747%20-2.22708%2C-5.40573l0%2C-13.18853c0%2C-2.11507%200.85573%2C-4.0308%202.24011%2C-5.4188c1.38907%2C-1.39267%203.31041%2C-2.25493%205.43333%2C-2.25493l144.34523%2C0c2.13333%2C0%204.064%2C0.87%205.45467%2C2.27533c1.372%2C1.3864%202.21867%2C3.2932%202.21867%2C5.39733l0%2C13.18907c0%2C2.10573%20-0.848%2C4.0136%20-2.22133%2C5.4c-1.39067%2C1.4036%20-3.32%2C2.27347%20-5.452%2C2.27347%27%20id%3D%27path16%27%20fill-rule%3D%27nonzero%27%20fill%3D%27%23eb1a2b%27%2F%3E%20%3C%2Fg%3E%20%3C%2Fsvg%3E");
      }

      .preloader__text {
        margin-top: 16px;
        font-weight: 500;
        font-size: 14px;
        font-family: Sans-serif;
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-duration: 0.9s;
        animation-delay: 1.8s;
        animation-fill-mode: forwards;
      }

      .theme-light .preloader__text {
        color: #52545c;
      }

      .theme-dark .preloader__text {
        color: #d8d9da;
      }

      @keyframes preloader-fade-in {
        0% {
          opacity: 0;
          /*animation-timing-function: linear;*/
          animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes preloader-bounce {
        from,
        to {
          transform: translateY(0px);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
        }
        50% {
          transform: translateY(-50px);
          animation-timing-function: cubic-bezier(0.9, 0, 0.7, 1);
        }
      }

      @keyframes preloader-squash {
        0% {
          transform: scaleX(1.3) scaleY(0.8);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
          transform-origin: bottom center;
        }
        15% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0.7, 0.75);
          transform-origin: bottom center;
        }
        55% {
          transform: scaleX(1.05) scaleY(0.95);
          animation-timing-function: cubic-bezier(0.9, 0, 1, 1);
          transform-origin: top center;
        }
        95% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0, 1);
          transform-origin: bottom center;
        }
        100% {
          transform: scaleX(1.3) scaleY(0.8);
          transform-origin: bottom center;
          animation-timing-function: cubic-bezier(0, 0, 0.7, 1);
        }
      }

      /* Fail info */
      .preloader__text--fail {
        display: none;
      }

      /* stop logo animation */
      .preloader--done .preloader__bounce,
      .preloader--done .preloader__logo {
        animation-name: none;
        display: none;
      }

      .preloader--done .preloader__logo,
      .preloader--done .preloader__text {
        display: none;
        color: #ff5705 !important;
        font-size: 15px;
      }

      .preloader--done .preloader__text--fail {
        display: block;
      }

      [ng\:cloak],
      [ng-cloak],
      .ng-cloak {
        display: none !important;
      }
    </style>

    <div class="preloader">
      <div class="preloader__enter">
        <div class="preloader__bounce">
          <div class="preloader__logo"></div>
        </div>
      </div>
      <div class="preloader__text">Loading Grafana</div>
      <div class="preloader__text preloader__text--fail">
        <p>
          <strong>If you're seeing this Grafana has failed to load its application files</strong>
          <br />
          <br />
        </p>
        <p>
          1. This could be caused by your reverse proxy settings.<br /><br />
          2. If you host grafana under subpath make sure your grafana.ini root_url setting includes subpath. If not using a reverse proxy make sure to set serve_from_sub_path to true.<br />
          <br />
          3. If you have a local dev build make sure you build frontend using: yarn start, yarn start:hot, or yarn
          build<br />
          <br />
          4. Sometimes restarting grafana-server can help<br />
        </p>
      </div>
    </div>

    <grafana-app class="grafana-app" ng-cloak>
      <sidemenu class="sidemenu"></sidemenu>
      <app-notifications-list class="page-alert-list"></app-notifications-list>
      <search-wrapper></search-wrapper>

      <div class="main-view">
				<div ng-view class="scroll-canvas"></div>
      </div>
    </grafana-app>

    <script>
        window.grafanaBootData = {
          user: [[.User]],
          settings: [[.Settings]],
          navTree: [[.NavTree]]
        };

      // In case the js files fails to load the code below will show an info message.
        window.onload = function() {
          var preloader = document.getElementsByClassName("preloader");
          if (preloader.length) {
            preloader[0].className = "preloader preloader--done";
          }
        };
    </script>

    [[if .GoogleTagManagerId]]
    <!-- Google Tag Manager -->
    <script>
      dataLayer = [
        {
          IsSignedIn: '[[.User.IsSignedIn]]',
          Email: '[[.User.Email]]',
          Name: '[[.User.Name]]',
          UserId: '[[.User.Id]]',
          OrgId: '[[.User.OrgId]]',
          OrgName: '[[.User.OrgName]]',
        },
      ];
    </script>
    <noscript>
      <iframe
        src="//www.googletagmanager.com/ns.html?id=[[.GoogleTagManagerId]]"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe>
    </noscript>
    <script>
      (function(w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', '[[.GoogleTagManagerId]]');
    </script>
    <!-- End Google Tag Manager -->
    [[end]]

    <%
    for (key in htmlWebpackPlugin.files.chunks) { %><%
      if (htmlWebpackPlugin.files.jsIntegrity) { %>
    <script
      src="<%= htmlWebpackPlugin.files.chunks[key].entry %>"
      type="text/javascript"
      integrity="<%= htmlWebpackPlugin.files.jsIntegrity[htmlWebpackPlugin.files.js.indexOf(htmlWebpackPlugin.files.chunks[key].entry)] %>"
      crossorigin="<%= webpackConfig.output.crossOriginLoading %>"></script><%
      } else { %>
    <script src="<%= htmlWebpackPlugin.files.chunks[key].entry %>" type="text/javascript"></script><%
      } %><%
    } %>
    <script>
      performance.mark('js done blocking');
    </script>
  </body>
</html>
